<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>ITACHIIXT V2</title>
  <meta name="theme-color" content="#0ea5e9"/>
  <meta name="description" content="ITACHIIXT - Advanced Prediction Platform with AI Pattern-Based Technology"/>
  <meta property="og:title" content="ITACHIIXT V2 - Advanced Prediction Platform"/>
  <meta property="og:description" content="Advanced Prediction Platform with AI Pattern-Based Technology"/>
  <meta property="og:type" content="website"/>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    
    :root {
      --primary: #0ea5e9;
      --secondary: #10b981;
      --accent: #a855f7;
      --success: #22c55e;
      --destructive: #ef4444;
      --pending: #f59e0b;
      --bg-start: #e0f2fe;
      --bg-mid: #f0fdf4;
      --bg-end: #faf5ff;
      --glass-bg: rgba(255,255,255,0.7);
      --glass-border: rgba(255,255,255,0.8);
      --text-primary: #1e293b;
      --text-secondary: #64748b;
    }
    
    .dark {
      --bg-start: #0f172a;
      --bg-mid: #1e293b;
      --bg-end: #1e1b4b;
      --glass-bg: rgba(30,41,59,0.8);
      --glass-border: rgba(51,65,85,0.6);
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
    }
    
    body{
      font-family:'Poppins',sans-serif;
      background:linear-gradient(135deg,var(--bg-start) 0%,var(--bg-mid) 50%,var(--bg-end) 100%);
      color:var(--text-primary);
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding:20px;
      padding-bottom:100px;
      overflow-x:hidden;
      transition: all 0.3s ease;
    }
    
    .bubbles{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:0;pointer-events:none;}
    .bubbles span{position:absolute;bottom:-150px;border-radius:50%;animation:rise 25s infinite ease-in;opacity:0.5;}
    .bubbles span:nth-child(1){width:60px;height:60px;left:5%;animation-duration:18s;background:radial-gradient(circle,rgba(14,165,233,0.4),rgba(14,165,233,0.1));}
    .bubbles span:nth-child(2){width:60px;height:60px;left:20%;animation-duration:22s;animation-delay:2s;background:radial-gradient(circle,rgba(16,185,129,0.4),rgba(16,185,129,0.1));}
    .bubbles span:nth-child(3){width:60px;height:60px;left:35%;animation-duration:26s;animation-delay:4s;background:radial-gradient(circle,rgba(168,85,247,0.4),rgba(168,85,247,0.1));}
    .bubbles span:nth-child(4){width:60px;height:60px;left:50%;animation-duration:20s;animation-delay:1s;background:radial-gradient(circle,rgba(34,211,238,0.4),rgba(34,211,238,0.1));}
    .bubbles span:nth-child(5){width:60px;height:60px;left:65%;animation-duration:24s;animation-delay:3s;background:radial-gradient(circle,rgba(59,130,246,0.4),rgba(59,130,246,0.1));}
    .bubbles span:nth-child(6){width:60px;height:60px;left:80%;animation-duration:30s;animation-delay:5s;background:radial-gradient(circle,rgba(52,211,153,0.4),rgba(52,211,153,0.1));}
    @keyframes rise{0%{transform:translateY(0) scale(1);opacity:0.5;}100%{transform:translateY(-110vh) scale(1.5);opacity:0;}}
    
    .container{width:100%;max-width:500px;position:relative;z-index:2;}
    .glass{background:var(--glass-bg);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid var(--glass-border);border-radius:24px;box-shadow:0 8px 32px rgba(0,0,0,0.1);}
    
    .gradient-text{background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
    
    .login-container{display:flex;align-items:center;justify-content:center;min-height:100vh;width:100%;}
    .login-box{width:100%;max-width:400px;padding:32px;}
    .login-title{font-size:1.8rem;font-weight:bold;text-align:center;margin-bottom:8px;}
    .login-subtitle{text-align:center;color:var(--text-secondary);font-size:0.9rem;margin-bottom:32px;}
    .login-input{width:100%;padding:16px;background:rgba(255,255,255,0.5);border:1px solid rgba(255,255,255,0.6);border-radius:16px;color:var(--text-primary);font-size:1.1rem;text-align:center;letter-spacing:4px;outline:none;transition:all 0.3s;}
    .dark .login-input{background:rgba(255,255,255,0.1);border-color:rgba(255,255,255,0.2);}
    .login-input::placeholder{color:var(--text-secondary);letter-spacing:normal;}
    .login-input:focus{border-color:var(--primary);box-shadow:0 0 20px rgba(14,165,233,0.3);}
    .login-btn{width:100%;padding:16px;margin-top:24px;border:none;border-radius:50px;font-size:1.1rem;font-weight:bold;color:#fff;background:linear-gradient(135deg,var(--primary),var(--secondary));cursor:pointer;transition:all 0.3s;display:flex;align-items:center;justify-content:center;gap:8px;}
    .login-btn:hover{opacity:0.9;transform:scale(1.02);}
    .login-btn:disabled{opacity:0.5;cursor:not-allowed;}
    .login-footer{text-align:center;font-size:0.75rem;color:var(--text-secondary);margin-top:24px;}
    .login-error{color:var(--destructive);text-align:center;font-size:0.85rem;margin-top:12px;}
    
    .telegram-btn{width:100%;padding:14px;margin-top:16px;border:none;border-radius:50px;font-size:1rem;font-weight:bold;color:#fff;background:linear-gradient(135deg,#0088cc,#00aced);cursor:pointer;transition:all 0.3s;display:flex;align-items:center;justify-content:center;gap:10px;text-decoration:none;}
    .telegram-btn:hover{opacity:0.9;transform:scale(1.02);}
    .telegram-btn svg{width:22px;height:22px;}
    
    .dashboard{display:none;}
    .header{text-align:center;padding:20px;margin-bottom:20px;position:relative;}
    .header h1{font-family:'Orbitron',sans-serif;font-size:clamp(1.2rem,5vw,1.5rem);font-weight:bold;}
    .header-btns{position:absolute;right:16px;top:50%;transform:translateY(-50%);display:flex;gap:8px;}
    .header-btns-left{position:absolute;left:16px;top:50%;transform:translateY(-50%);display:flex;gap:8px;}
    .icon-btn{background:rgba(255,255,255,0.5);border:none;padding:8px 12px;border-radius:50%;cursor:pointer;color:var(--text-primary);transition:all 0.3s;font-size:1rem;width:40px;height:40px;display:flex;align-items:center;justify-content:center;}
    .dark .icon-btn{background:rgba(255,255,255,0.1);}
    .icon-btn:hover{background:rgba(255,255,255,0.7);}
    .dark .icon-btn:hover{background:rgba(255,255,255,0.2);}
    .icon-btn svg{width:20px;height:20px;}
    
    .top-bar{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;margin-bottom:20px;}
    .period-box{font-size:clamp(0.8rem,3vw,1rem);font-weight:600;color:var(--text-secondary);}
    .timer-box{font-family:'Orbitron',sans-serif;font-size:clamp(1.5rem,6vw,2rem);font-weight:bold;color:var(--secondary);}
    
    .stats-section{padding:16px 20px;margin-bottom:20px;}
    .stats-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;text-align:center;}
    .stat-item{display:flex;flex-direction:column;}
    .stat-label{font-size:0.6rem;color:var(--text-secondary);margin-bottom:4px;}
    .stat-value{font-family:'Orbitron',sans-serif;font-size:0.9rem;font-weight:bold;}
    .stat-value.total{color:var(--text-primary);}
    .stat-value.win{color:var(--success);text-shadow:0 0 10px rgba(34,197,94,0.3);}
    .stat-value.loss{color:var(--destructive);text-shadow:0 0 10px rgba(239,68,68,0.3);}
    .stat-value.jackpot{color:var(--accent);text-shadow:0 0 10px rgba(168,85,247,0.3);}
    .stat-value.rate{color:var(--primary);text-shadow:0 0 10px rgba(14,165,233,0.3);}
    
    .prediction-section{padding:24px;margin-bottom:20px;text-align:center;position:relative;overflow:hidden;}
    .prediction-section::before{content:'';position:absolute;inset:0;opacity:0.15;z-index:0;}
    .prediction-section.alpha::before{background:linear-gradient(135deg,#0ea5e9,#22d3ee);}
    .prediction-section.beta::before{background:linear-gradient(135deg,#10b981,#34d399);}
    .prediction-section.gamma::before{background:linear-gradient(135deg,#a855f7,#c084fc);}
    .prediction-section>*{position:relative;z-index:1;}
    .prediction-label{font-size:0.9rem;color:var(--text-secondary);margin-bottom:16px;}
    
    .server-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:16px;}
    .server-card{position:relative;padding:16px 8px;background:rgba(255,255,255,0.5);border:2px solid transparent;border-radius:16px;cursor:pointer;transition:all 0.3s;text-align:center;overflow:hidden;}
    .dark .server-card{background:rgba(255,255,255,0.05);}
    .server-card::before{content:'';position:absolute;inset:0;opacity:0;transition:opacity 0.3s;z-index:0;}
    .server-card[data-server="server1"]::before{background:linear-gradient(135deg,rgba(14,165,233,0.15),rgba(34,211,238,0.15));}
    .server-card[data-server="server2"]::before{background:linear-gradient(135deg,rgba(16,185,129,0.15),rgba(52,211,153,0.15));}
    .server-card[data-server="server3"]::before{background:linear-gradient(135deg,rgba(168,85,247,0.15),rgba(192,132,252,0.15));}
    .server-card>*{position:relative;z-index:1;}
    .server-card:hover{background:rgba(255,255,255,0.7);}
    .dark .server-card:hover{background:rgba(255,255,255,0.1);}
    .server-card:hover::before{opacity:1;}
    .server-card.active{border-color:var(--primary);background:rgba(255,255,255,0.8);box-shadow:0 4px 20px rgba(14,165,233,0.2);}
    .dark .server-card.active{background:rgba(255,255,255,0.1);}
    .server-card.active::before{opacity:1;}
    .server-card[data-server="server1"].active{border-color:#0ea5e9;}
    .server-card[data-server="server2"].active{border-color:#10b981;}
    .server-card[data-server="server3"].active{border-color:#a855f7;}
    .server-icon{width:40px;height:40px;border-radius:50%;margin:0 auto 8px;display:flex;align-items:center;justify-content:center;color:#fff;}
    .server-icon.alpha{background:linear-gradient(135deg,var(--primary),#22d3ee);}
    .server-icon.beta{background:linear-gradient(135deg,var(--secondary),#34d399);}
    .server-icon.gamma{background:linear-gradient(135deg,var(--accent),#c084fc);}
    .server-name{font-family:'Orbitron',sans-serif;font-size:0.75rem;font-weight:bold;}
    .server-active-dot{position:absolute;top:8px;right:8px;width:8px;height:8px;background:var(--primary);border-radius:50%;animation:pulse 1.5s infinite;}
    .server-card[data-server="server1"] .server-active-dot{background:#0ea5e9;}
    .server-card[data-server="server2"] .server-active-dot{background:#10b981;}
    .server-card[data-server="server3"] .server-active-dot{background:#a855f7;}
    
    .prediction-balls{display:flex;justify-content:center;align-items:center;gap:16px;margin:24px 0;}
    
    .side-ball-container{width:80px;height:80px;position:relative;}
    .rainbow-border{position:absolute;inset:0;border-radius:50%;padding:3px;background:linear-gradient(90deg,#ff0000,#ff8000,#ffff00,#80ff00,#00ff00,#00ff80,#00ffff,#0080ff,#0000ff,#8000ff,#ff00ff,#ff0080,#ff0000);background-size:400% 400%;animation:rainbow 3s ease infinite;}
    @keyframes rainbow{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
    
    .side-ball{width:100%;height:100%;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Orbitron',sans-serif;font-size:2rem;font-weight:900;background:rgba(255,255,255,0.9);box-shadow:0 0 30px rgba(0,0,0,0.1);overflow:hidden;position:relative;}
    .dark .side-ball{background:rgba(30,41,59,0.9);}
    .side-ball.big{color:var(--primary);text-shadow:0 0 20px rgba(14,165,233,0.5);}
    .side-ball.small{color:var(--secondary);text-shadow:0 0 20px rgba(16,185,129,0.5);}
    
    .ball{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Orbitron',sans-serif;font-size:1.2rem;font-weight:bold;color:#fff;box-shadow:0 4px 15px rgba(0,0,0,0.2);transition:transform 0.3s;}
    .ball.small-size{width:32px;height:32px;font-size:0.85rem;}
    .ball.large{width:80px;height:80px;font-size:1.8rem;}
    .ball.red{background:radial-gradient(circle at 30% 30%,#ff6b9d,#ff1493,#a0005a);}
    .ball.green{background:radial-gradient(circle at 30% 30%,#6bd36b,#22c55e,#006600);}
    .ball.purple{background:radial-gradient(circle at 30% 30%,#c4b5fd,#8b5cf6,#5b21b6);}
    
    .status-badge{padding:6px 12px;border-radius:50px;font-size:0.65rem;font-weight:bold;color:#fff;display:inline-flex;align-items:center;justify-content:center;}
    .status-pending{background:linear-gradient(135deg,#f59e0b,#ea580c);animation:pulse 1.5s infinite;}
    .status-victory{background:linear-gradient(135deg,#22c55e,#15803d);}
    .status-defeat{background:linear-gradient(135deg,#ef4444,#b91c1c);}
    .status-jackpot{background:linear-gradient(135deg,#a855f7,#7c3aed);}
    
    .bottom-nav{position:fixed;bottom:0;left:0;right:0;z-index:100;background:var(--glass-bg);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border-top:1px solid var(--glass-border);border-radius:24px 24px 0 0;}
    .nav-container{display:flex;justify-content:space-around;padding:12px 20px;}
    .nav-btn{display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 24px;border:none;background:transparent;color:var(--text-secondary);cursor:pointer;border-radius:16px;transition:all 0.3s;}
    .nav-btn.active{background:linear-gradient(135deg,rgba(14,165,233,0.2),rgba(16,185,129,0.2));color:var(--text-primary);}
    .nav-btn:hover{background:rgba(255,255,255,0.5);}
    .dark .nav-btn:hover{background:rgba(255,255,255,0.1);}
    .nav-icon{font-size:1.2rem;}
    .nav-icon svg{width:24px;height:24px;}
    .nav-label{font-size:0.7rem;font-weight:600;}
    
    .history-page{display:none;}
    .history-section{padding:16px;}
    .history-header{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;padding:12px;font-size:0.6rem;font-weight:bold;background:rgba(255,255,255,0.5);border-radius:12px;margin-bottom:8px;text-align:center;color:var(--text-secondary);}
    .dark .history-header{background:rgba(255,255,255,0.05);}
    .history-box{display:flex;flex-direction:column;gap:6px;}
    .history-row{position:relative;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;padding:12px;font-size:0.8rem;border-radius:12px;align-items:center;text-align:center;animation:scaleIn 0.3s ease-out;overflow:hidden;}
    .history-row .row-content{position:relative;z-index:10;}
    .history-bg-number{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;user-select:none;font-family:'Orbitron',sans-serif;font-size:3.5rem;font-weight:900;opacity:0.2;}
    .history-row .ball-container{display:flex;justify-content:center;align-items:center;}
    @keyframes scaleIn{from{opacity:0;transform:scale(0.95);}to{opacity:1;transform:scale(1);}}
    @keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.5;}}
    
    .no-history{text-align:center;padding:40px;color:var(--text-secondary);}
    
    ::-webkit-scrollbar{width:6px;}
    ::-webkit-scrollbar-track{background:rgba(255,255,255,0.3);border-radius:3px;}
    ::-webkit-scrollbar-thumb{background:rgba(14,165,233,0.4);border-radius:3px;}
    .hidden{display:none !important;}
  </style>
</head>
<body>
  <div class="bubbles">
    <span></span><span></span><span></span><span></span><span></span><span></span>
  </div>

  <!-- LOGIN PAGE -->
  <div id="loginPage" class="login-container">
    <div class="login-box glass">
      <h1 class="login-title gradient-text" style="font-family:'Orbitron',sans-serif;">ITACHIIXT</h1>
      <p class="login-subtitle">Enter your access key to continue</p>
      <form id="loginForm">
        <input type="text" id="keyInput" class="login-input" placeholder="ENTER KEY" autocomplete="off">
        <div id="loginError" class="login-error"></div>
        <button type="submit" id="loginBtn" class="login-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          <span id="loginBtnText">UNLOCK</span>
        </button>
      </form>
      
      <a href="https://t.me/ITACHIIXT" target="_blank" rel="noopener noreferrer" class="telegram-btn">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
        TELEGRAM
      </a>
      
      <p class="login-footer">TELEGRAM USERNAME BY TEAM - ITACHIIXT</p>
    </div>
  </div>

  <!-- MAIN PAGE -->
  <div id="mainPage" class="container dashboard">
    <header class="header glass">
      <div class="header-btns-left">
        <button class="icon-btn" id="darkModeBtn" title="Toggle Dark Mode">
          <svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
          <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
        </button>
      </div>
      <h1 class="gradient-text">ITACHIIXT</h1>
      <div class="header-btns">
        <button class="icon-btn" id="logoutBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"/><line x1="12" x2="12" y1="2" y2="12"/></svg>
        </button>
      </div>
    </header>
    
    <div class="top-bar glass">
      <div class="period-box">WINGO NO - <span id="period">--</span></div>
      <div class="timer-box" id="timer">00</div>
    </div>

    <section class="stats-section glass">
      <div class="stats-grid">
        <div class="stat-item">
          <span class="stat-label">TOTAL</span>
          <span class="stat-value total" id="totalCount">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">VICTORY</span>
          <span class="stat-value win" id="winCount">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">DEFEAT</span>
          <span class="stat-value loss" id="lossCount">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">JACKPOT</span>
          <span class="stat-value jackpot" id="jackpotCount">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">WIN RATE</span>
          <span class="stat-value rate" id="winRate">0.0%</span>
        </div>
      </div>
    </section>

    <section id="predictionSection" class="prediction-section glass alpha">
      <div class="server-grid" id="serverGrid">
        <div class="server-card active" data-server="server1">
          <div class="server-active-dot" id="dot1"></div>
          <div class="server-icon alpha">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="20" height="8" x="2" y="2" rx="2" ry="2"/><rect width="20" height="8" x="2" y="14" rx="2" ry="2"/><line x1="6" x2="6.01" y1="6" y2="6"/><line x1="6" x2="6.01" y1="18" y2="18"/></svg>
          </div>
          <p class="server-name">SMART - AI</p>
        </div>
        <div class="server-card" data-server="server2">
          <div class="server-active-dot hidden" id="dot2"></div>
          <div class="server-icon beta">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0 1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08A2.5 2.5 0 0 0 12 19.5a2.5 2.5 0 0 0 2.32.64 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0 1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 12 4.5"/><path d="m15.7 10.4-.9.4"/><path d="m9.2 13.2-.9.4"/><path d="m13.6 15.7-.4-.9"/><path d="m10.8 9.2-.4-.9"/><path d="m15.7 13.5-.9-.4"/><path d="m9.2 10.8-.9-.4"/><path d="m10.4 15.7.4-.9"/><path d="m13.2 9.2.4-.9"/></svg>
          </div>
          <p class="server-name">MAXIMUM</p>
        </div>
        <div class="server-card" data-server="server3">
          <div class="server-active-dot hidden" id="dot3"></div>
          <div class="server-icon gamma">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"/></svg>
          </div>
          <p class="server-name">AI - BASED</p>
        </div>
      </div>

      <p class="prediction-label"><span id="serverLabel">SMART - AI</span> SERVER - PREDICTION</p>

      <div class="prediction-balls">
        <div class="side-ball-container">
          <div class="rainbow-border">
            <div id="sideBall" class="side-ball big">B</div>
          </div>
        </div>
        <div id="numberBall" class="ball large purple">5</div>
      </div>
    </section>
  </div>

  <!-- HISTORY PAGE -->
  <div id="historyPage" class="container history-page">
    <header class="header glass">
      <div class="header-btns-left">
        <button class="icon-btn" id="clearHistoryBtn" title="Clear History">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
        </button>
      </div>
      <h1 class="gradient-text">ITACHIIXT HISTORY</h1>
      <div class="header-btns">
        <button class="icon-btn" id="logoutBtn2">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"/><line x1="12" x2="12" y1="2" y2="12"/></svg>
        </button>
      </div>
    </header>

    <section class="history-section glass">
      <div class="history-header">
        <div>PERIOD</div>
        <div>PREDICT</div>
        <div>NUMBER</div>
        <div>STATUS</div>
      </div>
      <div id="historyBox" class="history-box"></div>
    </section>
  </div>

  <!-- BOTTOM NAVIGATION -->
  <nav id="bottomNav" class="bottom-nav hidden">
    <div class="nav-container">
      <button class="nav-btn active" id="navMain">
        <span class="nav-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        </span>
        <span class="nav-label">MAIN</span>
      </button>
      <button class="nav-btn" id="navHistory">
        <span class="nav-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" x2="12" y1="20" y2="10"/><line x1="18" x2="18" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="16"/></svg>
        </span>
        <span class="nav-label">HISTORY</span>
      </button>
    </div>
  </nav>

<script>
const FIREBASE_DATABASE_URL = 'https://shadow-93ea0-default-rtdb.firebaseio.com';
const HISTORY_API = 'https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json';

let historyData = [];
let lastSavedPeriod = null;
let currentPage = 'main';
let selectedServer = 'server1';
let isDarkMode = localStorage.getItem('darkMode') === 'true';

const serverNames = { server1: 'SMART - AI', server2: 'MAXIMUM', server3: 'AI - BASED' };

// Apply dark mode on load
if (isDarkMode) {
  document.body.classList.add('dark');
  document.getElementById('sunIcon').classList.remove('hidden');
  document.getElementById('moonIcon').classList.add('hidden');
}

function toggleDarkMode() {
  isDarkMode = !isDarkMode;
  localStorage.setItem('darkMode', isDarkMode);
  document.body.classList.toggle('dark', isDarkMode);
  document.getElementById('sunIcon').classList.toggle('hidden', !isDarkMode);
  document.getElementById('moonIcon').classList.toggle('hidden', isDarkMode);
}

document.getElementById('darkModeBtn').addEventListener('click', toggleDarkMode);

function generateDeviceId() {
  const stored = localStorage.getItem('deviceId');
  if (stored) return stored;
  
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  if (ctx) {
    ctx.textBaseline = 'top';
    ctx.font = '14px Arial';
    ctx.fillText('device-fingerprint', 2, 2);
  }
  
  const fingerprint = [
    navigator.userAgent,
    navigator.language,
    screen.width,
    screen.height,
    screen.colorDepth,
    new Date().getTimezoneOffset(),
    canvas.toDataURL(),
    navigator.hardwareConcurrency || 'unknown',
  ].join('|');
  
  let hash = 0;
  for (let i = 0; i < fingerprint.length; i++) {
    const char = fingerprint.charCodeAt(i);
    hash = ((hash << 5) - hash) + char;
    hash = hash & hash;
  }
  
  const deviceId = `DEV_${Math.abs(hash).toString(36).toUpperCase()}_${Date.now().toString(36).toUpperCase()}`;
  localStorage.setItem('deviceId', deviceId);
  return deviceId;
}

async function validateKey(inputKey) {
  try {
    const deviceId = generateDeviceId();
    const response = await fetch(`${FIREBASE_DATABASE_URL}/keys.json`);
    const keys = await response.json();
    
    if (!keys) return { valid: false, message: 'No keys found in database' };
    
    for (const keyId in keys) {
      const keyData = keys[keyId];
      
      if (keyData.key === inputKey || keyId === inputKey) {
        if (keyData.isActive === false) return { valid: false, message: 'Key has been deactivated' };
        
        const expiresAt = keyData.expiresAt || keyData.expiry;
        if (expiresAt && Date.now() > expiresAt) return { valid: false, message: 'Key has expired' };
        
        if (keyData.boundDevice) {
          if (keyData.boundDevice !== deviceId) return { valid: false, message: 'Key is already bound to another device' };
        } else {
          await fetch(`${FIREBASE_DATABASE_URL}/keys/${keyId}.json`, {
            method: 'PATCH',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ boundDevice: deviceId, boundAt: Date.now() })
          });
        }
        
        return { valid: true, expiresAt, keyId };
      }
    }
    
    return { valid: false, message: 'Invalid key' };
  } catch (error) {
    console.error('Firebase error:', error);
    return { valid: false, message: 'Connection error. Please try again.' };
  }
}

async function checkKeyValidity() {
  const storedKey = sessionStorage.getItem('userKey');
  if (!storedKey) { logout(); return false; }
  
  const storedExpiry = sessionStorage.getItem('expiresAt');
  if (storedExpiry && Date.now() > parseInt(storedExpiry, 10)) { logout(); return false; }
  
  const result = await validateKey(storedKey);
  if (!result.valid) { logout(); return false; }
  
  return true;
}

function checkAuth() {
  const isLoggedIn = sessionStorage.getItem('isLoggedIn');
  if (isLoggedIn === 'true') {
    checkKeyValidity().then(valid => { if (valid) showDashboard(); });
  }
}

document.getElementById('loginForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  const key = document.getElementById('keyInput').value.trim().toUpperCase();
  const btn = document.getElementById('loginBtn');
  const btnText = document.getElementById('loginBtnText');
  const errorDiv = document.getElementById('loginError');
  
  if (!key) { errorDiv.textContent = '* PLEASE ENTER A KEY *'; return; }
  
  btnText.textContent = 'VERIFYING...';
  btn.disabled = true;
  errorDiv.textContent = '';
  
  const result = await validateKey(key);
  
  if (result.valid) {
    localStorage.removeItem('historyData');
    localStorage.removeItem('period');
    localStorage.removeItem('side');
    localStorage.removeItem('num');
    historyData = [];
    
    sessionStorage.setItem('isLoggedIn', 'true');
    sessionStorage.setItem('userKey', key);
    if (result.expiresAt) sessionStorage.setItem('expiresAt', String(result.expiresAt));
    showDashboard();
  } else {
    errorDiv.textContent = `* ${result.message.toUpperCase()} *`;
    btnText.textContent = 'UNLOCK';
    btn.disabled = false;
  }
});

function logout() {
  sessionStorage.removeItem('isLoggedIn');
  sessionStorage.removeItem('userKey');
  sessionStorage.removeItem('expiresAt');
  localStorage.removeItem('historyData');
  localStorage.removeItem('period');
  localStorage.removeItem('side');
  localStorage.removeItem('num');
  location.reload();
}

document.getElementById('logoutBtn').addEventListener('click', logout);
document.getElementById('logoutBtn2').addEventListener('click', logout);
document.getElementById('clearHistoryBtn').addEventListener('click', function() {
  historyData = [];
  localStorage.removeItem('historyData');
  updateStats();
  renderHistory();
});

function updatePredictionSectionBg() {
  const section = document.getElementById('predictionSection');
  section.classList.remove('alpha', 'beta', 'gamma');
  if (selectedServer === 'server1') section.classList.add('alpha');
  else if (selectedServer === 'server2') section.classList.add('beta');
  else section.classList.add('gamma');
}

document.querySelectorAll('.server-card').forEach(card => {
  card.addEventListener('click', function() {
    const serverId = this.dataset.server;
    selectedServer = serverId;
    localStorage.setItem('selectedServer', serverId);
    
    document.querySelectorAll('.server-card').forEach(c => c.classList.remove('active'));
    this.classList.add('active');
    
    document.getElementById('dot1').classList.toggle('hidden', serverId !== 'server1');
    document.getElementById('dot2').classList.toggle('hidden', serverId !== 'server2');
    document.getElementById('dot3').classList.toggle('hidden', serverId !== 'server3');
    
    document.getElementById('serverLabel').textContent = serverNames[serverId];
    updatePredictionSectionBg();
  });
});

document.getElementById('navMain').addEventListener('click', function() { switchPage('main'); });
document.getElementById('navHistory').addEventListener('click', function() { switchPage('history'); });

function switchPage(page) {
  currentPage = page;
  document.getElementById('mainPage').style.display = page === 'main' ? 'block' : 'none';
  document.getElementById('historyPage').style.display = page === 'history' ? 'block' : 'none';
  document.getElementById('navMain').classList.toggle('active', page === 'main');
  document.getElementById('navHistory').classList.toggle('active', page === 'history');
  if (page === 'history') renderHistory();
}

function showDashboard() {
  document.getElementById('loginPage').classList.add('hidden');
  document.getElementById('mainPage').style.display = 'block';
  document.getElementById('bottomNav').classList.remove('hidden');
  
  selectedServer = localStorage.getItem('selectedServer') || 'server1';
  document.querySelectorAll('.server-card').forEach(c => {
    c.classList.toggle('active', c.dataset.server === selectedServer);
  });
  document.getElementById('dot1').classList.toggle('hidden', selectedServer !== 'server1');
  document.getElementById('dot2').classList.toggle('hidden', selectedServer !== 'server2');
  document.getElementById('dot3').classList.toggle('hidden', selectedServer !== 'server3');
  document.getElementById('serverLabel').textContent = serverNames[selectedServer];
  updatePredictionSectionBg();
  
  initDashboard();
}

function initDashboard() {
  const saved = localStorage.getItem('historyData');
  if (saved) historyData = JSON.parse(saved);
  
  lastSavedPeriod = localStorage.getItem('period');
  const savedSide = localStorage.getItem('side');
  const savedNum = localStorage.getItem('num');
  
  if (lastSavedPeriod && savedSide && savedNum) updateUI(savedSide, parseInt(savedNum, 10));
  
  updateStats();
  
  setInterval(updateTimer, 1000);
  setInterval(autoPredict, 1000);
  setInterval(checkResults, 5000);
  setInterval(checkKeyValidity, 10000);
  
  updateTimer();
  autoPredict();
  checkResults();
}

function getIST() {
  const n = new Date();
  const u = n.getTime() + n.getTimezoneOffset() * 60000;
  return new Date(u + 5.5 * 3600000);
}

function getPeriod() {
  const ist = getIST();
  const y = ist.getFullYear();
  const m = String(ist.getMonth() + 1).padStart(2, '0');
  const dd = String(ist.getDate()).padStart(2, '0');
  const minutes = ist.getHours() * 60 + ist.getMinutes();
  return String(y) + m + dd + "1000" + (10001 + minutes - 330);
}

function getBallClass(n) {
  if ([0, 5].includes(n)) return 'purple';
  if ([2, 4, 6, 8].includes(n)) return 'red';
  return 'green';
}

function getBgColor(n) {
  if ([0, 5].includes(n)) return 'rgba(139, 92, 246, 0.15)';
  if ([2, 4, 6, 8].includes(n)) return 'rgba(255, 20, 147, 0.15)';
  return 'rgba(34, 197, 94, 0.15)';
}

function getTextColor(n) {
  if ([0, 5].includes(n)) return '#8b5cf6';
  if ([2, 4, 6, 8].includes(n)) return '#ff1493';
  return '#22c55e';
}

function getStatusClass(status) {
  if (status === 'VICTORY') return 'status-victory';
  if (status === 'DEFEAT') return 'status-defeat';
  if (status === 'JACKPOT') return 'status-jackpot';
  return 'status-pending';
}

function updateTimer() {
  const now = getIST();
  const sec = now.getSeconds();
  const remaining = 60 - sec;
  document.getElementById('timer').textContent = String(remaining).padStart(2, '0');
  document.getElementById('period').textContent = getPeriod().slice(-5);
}

function updateStats() {
  const completed = historyData.filter(h => h.status !== 'PENDING');
  const wins = historyData.filter(h => h.status === 'VICTORY').length;
  const losses = historyData.filter(h => h.status === 'DEFEAT').length;
  const jackpots = historyData.filter(h => h.status === 'JACKPOT').length;
  const total = completed.length;
  
  const effectiveWins = wins + jackpots;
  const winRate = total > 0 ? ((effectiveWins / total) * 100).toFixed(1) : '0.0';

  document.getElementById('totalCount').textContent = total;
  document.getElementById('winCount').textContent = wins;
  document.getElementById('lossCount').textContent = losses;
  document.getElementById('jackpotCount').textContent = jackpots;
  document.getElementById('winRate').textContent = winRate + '%';
}

function renderHistory() {
  const box = document.getElementById('historyBox');
  box.innerHTML = '';
  
  // Only show 12 items - no scroll
  const displayData = historyData.slice(0, 12);
  
  if (displayData.length === 0) {
    box.innerHTML = '<div class="no-history">No predictions yet. Wait for the next period.</div>';
    return;
  }
  
  displayData.forEach(item => {
    const row = document.createElement('div');
    row.className = 'history-row';
    row.style.background = getBgColor(item.predictedNum);
    
    row.innerHTML = `
      <div class="history-bg-number" style="color: ${getTextColor(item.predictedNum)}">${item.predictedNum}</div>
      <div class="row-content" style="font-weight:500">${item.period.slice(-5)}</div>
      <div class="row-content" style="font-weight:bold">${item.predicted}</div>
      <div class="row-content ball-container"><div class="ball small-size ${getBallClass(item.predictedNum)}">${item.predictedNum}</div></div>
      <div class="row-content"><span class="status-badge ${getStatusClass(item.status)}">${item.status}</span></div>
    `;
    box.appendChild(row);
  });

  updateStats();
}

// SMART-AI LOGIC
function alphaLogic(recentNumbers, completedHistory) {
  const recentSides = recentNumbers.map(n => n >= 5 ? 'BIG' : 'SMALL');
  
  let predictedSide = 'BIG';
  
  const bigCount = recentNumbers.slice(0, 8).filter(n => n >= 5).length;
  const smallCount = 8 - bigCount;
  const shortTrend = recentNumbers.slice(0, 3).reduce((acc, n) => acc + (n >= 5 ? 1 : -1), 0);
  const longTrend = recentNumbers.slice(0, 8).reduce((acc, n) => acc + (n >= 5 ? 1 : -1), 0);
  
  let patternScore = 0;
  
  if (recentSides.length >= 3 && recentSides[0] === recentSides[1] && recentSides[1] === recentSides[2]) {
    patternScore += recentSides[0] === 'BIG' ? -3 : 3;
  }
  
  if (bigCount > 5) patternScore -= (bigCount - 5);
  if (smallCount > 5) patternScore += (smallCount - 5);
  patternScore += shortTrend * 0.5;
  
  patternScore *= 1.2;
  if (longTrend > 2) patternScore -= 2;
  if (longTrend < -2) patternScore += 2;
  
  const randomFactor = (Math.random() - 0.5) * 2;
  patternScore += randomFactor;
  
  if (patternScore > 1.5) {
    predictedSide = 'BIG';
  } else if (patternScore < -1.5) {
    predictedSide = 'SMALL';
  } else {
    predictedSide = recentSides[0] || 'BIG';
  }
  
  const pool = predictedSide === 'BIG' ? [5, 6, 7, 8, 9] : [0, 1, 2, 3, 4];
  const numberCounts = {};
  recentNumbers.forEach(n => { numberCounts[n] = (numberCounts[n] || 0) + 1; });
  const sortedPool = pool.sort((a, b) => (numberCounts[a] || 0) - (numberCounts[b] || 0));
  
  const weights = [0.35, 0.25, 0.20, 0.12, 0.08];
  const random = Math.random();
  let cumulative = 0;
  let predictedNumber = sortedPool[0];
  
  for (let i = 0; i < sortedPool.length; i++) {
    cumulative += weights[i];
    if (random < cumulative) { 
      predictedNumber = sortedPool[i]; 
      break; 
    }
  }
  
  return { side: predictedSide, number: predictedNumber };
}

// MAXIMUM LOGIC
function betaLogic(recentNumbers, completedHistory) {
  const recentSides = recentNumbers.map(n => n >= 5 ? 'BIG' : 'SMALL');
  const recentResults = completedHistory.slice(0, 5);
  const lastActualSide = recentSides[0] || 'BIG';
  
  let predictedSide = lastActualSide;
  let breakerTriggered = false;
  
  if (recentSides.length >= 3) {
    const lastThree = recentSides.slice(0, 3);
    if (lastThree.every(s => s === lastThree[0])) {
      predictedSide = lastThree[0] === 'BIG' ? 'SMALL' : 'BIG';
      breakerTriggered = true;
    }
  }
  
  if (!breakerTriggered && recentResults.length >= 2) {
    const lastTwo = recentResults.slice(0, 2);
    if (lastTwo[0].status === 'DEFEAT' && lastTwo[1].status === 'DEFEAT' && 
        lastTwo[0].predicted === lastTwo[1].predicted) {
      predictedSide = lastTwo[0].predicted === 'BIG' ? 'SMALL' : 'BIG';
      breakerTriggered = true;
    }
  }
  
  if (!breakerTriggered) {
    predictedSide = lastActualSide;
  }
  
  const pool = predictedSide === 'BIG' ? [5, 6, 7, 8, 9] : [0, 1, 2, 3, 4];
  const numberCounts = {};
  recentNumbers.forEach(n => { numberCounts[n] = (numberCounts[n] || 0) + 1; });
  const sortedPool = pool.sort((a, b) => (numberCounts[a] || 0) - (numberCounts[b] || 0));
  
  const weights = [0.30, 0.28, 0.22, 0.12, 0.08];
  const random = Math.random();
  let cumulative = 0;
  let predictedNumber = sortedPool[0];
  
  for (let i = 0; i < sortedPool.length; i++) {
    cumulative += weights[i];
    if (random < cumulative) { 
      predictedNumber = sortedPool[i]; 
      break; 
    }
  }
  
  return { side: predictedSide, number: predictedNumber };
}

// AI-BASED LOGIC
function gammaLogic(recentNumbers, completedHistory) {
  const recentSides = recentNumbers.map(n => n >= 5 ? 'BIG' : 'SMALL');
  const recentResults = completedHistory.slice(0, 5);
  const lastActualSide = recentSides[0] || 'BIG';
  
  let predictedSide = lastActualSide;
  let breakerTriggered = false;
  
  if (recentSides.length >= 4) {
    const lastFour = recentSides.slice(0, 4);
    if (lastFour.every(s => s === lastFour[0])) {
      predictedSide = lastFour[0] === 'BIG' ? 'SMALL' : 'BIG';
      breakerTriggered = true;
    }
  }
  
  if (!breakerTriggered && recentResults.length >= 2) {
    const lastTwo = recentResults.slice(0, 2);
    if (lastTwo[0].status === 'DEFEAT' && lastTwo[1].status === 'DEFEAT' && 
        lastTwo[0].predicted === lastTwo[1].predicted) {
      predictedSide = lastTwo[0].predicted === 'BIG' ? 'SMALL' : 'BIG';
      breakerTriggered = true;
    }
  }
  
  if (!breakerTriggered) {
    predictedSide = lastActualSide;
  }
  
  const pool = predictedSide === 'BIG' ? [5, 6, 7, 8, 9] : [0, 1, 2, 3, 4];
  const numberCounts = {};
  recentNumbers.forEach(n => { numberCounts[n] = (numberCounts[n] || 0) + 1; });
  const sortedPool = pool.sort((a, b) => (numberCounts[a] || 0) - (numberCounts[b] || 0));
  
  const weights = [0.32, 0.26, 0.21, 0.13, 0.08];
  const random = Math.random();
  let cumulative = 0;
  let predictedNumber = sortedPool[0];
  
  for (let i = 0; i < sortedPool.length; i++) {
    cumulative += weights[i];
    if (random < cumulative) { 
      predictedNumber = sortedPool[i]; 
      break; 
    }
  }
  
  return { side: predictedSide, number: predictedNumber };
}

async function generateSmartPrediction() {
  const completedHistory = historyData.filter(h => h.status !== 'PENDING' && h.actualNum !== undefined);
  const recentNumbers = completedHistory.slice(0, 10).map(h => h.actualNum).filter(n => n !== undefined);
  
  if (recentNumbers.length < 2) {
    const now = getIST();
    const minute = now.getMinutes();
    const serverSeed = selectedServer === 'server1' ? 0 : selectedServer === 'server2' ? 1 : 2;
    const side = (minute + serverSeed) % 2 === 0 ? 'BIG' : 'SMALL';
    const pool = side === 'BIG' ? [5, 6, 7, 8, 9] : [0, 1, 2, 3, 4];
    return { side, number: pool[Math.floor(Math.random() * pool.length)] };
  }
  
  switch (selectedServer) {
    case 'server1':
      return alphaLogic(recentNumbers, completedHistory);
    case 'server2':
      return betaLogic(recentNumbers, completedHistory);
    case 'server3':
      return gammaLogic(recentNumbers, completedHistory);
    default:
      return alphaLogic(recentNumbers, completedHistory);
  }
}

function updateUI(side, num) {
  const sideBall = document.getElementById('sideBall');
  sideBall.className = `side-ball ${side === 'BIG' ? 'big' : 'small'}`;
  sideBall.textContent = side === 'BIG' ? 'B' : 'S';

  const numberBall = document.getElementById('numberBall');
  numberBall.textContent = num;
  numberBall.className = `ball large ${getBallClass(num)}`;
}

async function checkResults() {
  try {
    const response = await fetch(HISTORY_API);
    const data = await response.json();
    
    if (data?.data?.list && Array.isArray(data.data.list)) {
      const results = data.data.list;
      let updated = false;

      historyData = historyData.map(item => {
        if (item.status !== 'PENDING') return item;
        
        const result = results.find(r => r.issueNumber === item.period);
        
        if (result) {
          const actualNum = parseInt(result.number, 10);
          const actualSide = actualNum >= 5 ? 'BIG' : 'SMALL';
          const isNumberMatch = item.predictedNum === actualNum;
          const isSideMatch = item.predicted === actualSide;
          updated = true;
          
          let status;
          if (isNumberMatch) status = 'JACKPOT';
          else if (isSideMatch) status = 'VICTORY';
          else status = 'DEFEAT';
          
          return { ...item, actualNum, status };
        }
        
        return item;
      });
      
      if (updated) {
        localStorage.setItem('historyData', JSON.stringify(historyData));
        updateStats();
        if (currentPage === 'history') renderHistory();
      }
    }
  } catch (error) {
    console.error('Failed to fetch results:', error);
  }
}

async function autoPredict() {
  const currentPeriod = getPeriod();
  if (currentPeriod === lastSavedPeriod) return;

  const p = await generateSmartPrediction();
  updateUI(p.side, p.number);

  const newEntry = {
    period: currentPeriod,
    predicted: p.side,
    predictedNum: p.number,
    status: 'PENDING',
    server: selectedServer
  };
  
  historyData.unshift(newEntry);
  historyData = historyData.slice(0, 50);
  localStorage.setItem('historyData', JSON.stringify(historyData));
  updateStats();

  localStorage.setItem("period", currentPeriod);
  localStorage.setItem("side", p.side);
  localStorage.setItem("num", String(p.number));

  lastSavedPeriod = currentPeriod;
}

checkAuth();
</script>
</body>
</html>
